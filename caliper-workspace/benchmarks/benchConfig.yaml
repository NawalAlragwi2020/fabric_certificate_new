test:
  name: integrated-diploma-benchmark-v4
  description: 'الاختبار الشامل والمطور: يدمج كفاءة الإصدار والأمان العالي والتحقق تحت الحمل العالي'
  workers:
    type: local
    number: 2
  rounds:
    # 1. جولة الإصدار المجمع (Batching)
    - label: Issue-Certificates-SHA3-Batch
      description: إصدار شهادات مجمعة ومشفرة بـ SHA-3
      txDuration: 30
      rateControl:
        type: fixed-rate
        opts:
          tps: 50
      workload:
        module: workload/issueDiplomaBatch.js

    # 2. جولة التحقق تحت الحمل العالي (High Load) - المسمى المطلوب
    - label: Verify-Certificate-High-Load-SHA3
      description: التحقق اللحظي من الشهادات باستخدام SHA-3 تحت حمل عالٍ
      txDuration: 30
      rateControl:
        type: fixed-rate
        opts:
          tps: 200 # معدل مرتفع يمثل حالة الـ High Load
      workload:
        module: workload/verifyDiploma.js

    # 3. جولة اختبار الجهد المتصاعد (Stress Test)
    - label: Stress-Test-Scaling
      description: اختبار قدرة الشبكة من 50 إلى 400 TPS
      txDuration: 40
      rateControl:
        type: linear-rate
        opts:
          startingTps: 50
          finishingTps: 400
      workload:
        module: workload/issueDiplomaBatch.js

    # 4. جولة الاستعلام المنضبط (Optimized Query)
    - label: Query-All-Optimized
      description: جلب كافة الأصول بمعدل منخفض لضمان استقرار الذاكرة
      txDuration: 15 
      rateControl:
        type: fixed-rate
        opts:
          tps: 1 # لتقليل نسبة الفشل التي ظهرت سابقاً
      workload:
        module: workload/queryAllDiplomas.js
